# 🌐 语言选择功能使用指南

## 📋 功能概述

新增的语言选择功能可以让用户根据CSV文件的语言类型选择最适合的编码检测策略，提升文件读取的准确性和用户体验。

## 🎯 支持的语言

| 语言 | 显示名称 | 编码策略 | 适用场景 |
|------|----------|----------|----------|
| 🔄 自动检测 | Auto | UTF-8 → UTF-8-sig → GBK → GB2312 → Latin1 | 不确定文件语言时 |
| 🇨🇳 中文 | Chinese | GBK → GB2312 → UTF-8 → UTF-8-sig | 中文测试数据 |
| 🇪🇸 西班牙语 | Spanish | UTF-8 → UTF-8-sig → Latin1 → ISO-8859-1 | 西班牙语测试数据 |
| 🇺🇸 英语 | English | UTF-8 → ASCII → Latin1 → UTF-8-sig | 英语测试数据 |

## 🚀 使用方法

### 1. 主分析页面

1. 打开分析页面
2. 在"🌐 选择文件语言"部分选择您的CSV文件语言
3. 系统会显示对应的编码建议和提示信息
4. 上传CSV文件，系统会根据选择的语言优化读取策略

### 2. 仪表板页面

1. 在Dashboard标签页中
2. 选择"🌐 文件语言设置"
3. 选择对应的语言后，系统会用优化的策略读取分析结果文件

## 💡 功能特点

### 智能编码检测
- 根据语言类型优化编码尝试顺序
- 提高文件读取成功率
- 减少编码错误

### 多语言界面提示
- 根据选择的语言显示相应的成功/错误信息
- 提供语言特定的帮助信息
- 支持多语言的数据预览标题

### 语言统计信息
- 自动检测和统计语言特征
- 西班牙语：统计重音符号数量
- 中文：统计中文字符数量
- 显示数据完整度和文件大小

## 🔧 技术实现

### 编码策略
```python
strategies = {
    "auto": ['utf-8', 'utf-8-sig', 'gbk', 'gb2312', 'latin1'],
    "chinese": ['gbk', 'gb2312', 'utf-8', 'utf-8-sig'],
    "spanish": ['utf-8', 'utf-8-sig', 'latin1', 'iso-8859-1'],
    "english": ['utf-8', 'ascii', 'latin1', 'utf-8-sig']
}
```

### CSV读取参数
```python
pd.read_csv(file, encoding=encoding, 
           quoting=1, 
           skipinitialspace=True, 
           on_bad_lines='skip')
```

## 📊 语言检测特征

### 西班牙语特征检测
- 重音符号：`[áéíóúñü]`
- 特殊字符统计
- UTF-8编码优先

### 中文特征检测
- 中文字符：`[\u4e00-\u9fff]`
- GBK编码优先
- 支持简体中文

### 英语特征检测
- ASCII兼容性
- UTF-8/ASCII编码优先

## 🎨 用户体验改进

1. **直观的语言选择**
   - 国旗emoji标识
   - 清晰的语言名称
   - 编码建议提示

2. **实时反馈**
   - 语言特定的成功消息
   - 详细的错误信息
   - 处理进度显示

3. **统计信息**
   - 文件完整度
   - 语言特征统计
   - 数据质量指标

## 🔄 兼容性

- 向后兼容现有功能
- 默认使用自动检测
- 不影响现有工作流程

## 📝 使用建议

1. **已知语言**：选择具体语言以获得最佳性能
2. **混合内容**：使用自动检测模式
3. **特殊字符多**：优先选择UTF-8支持的语言
4. **中文数据**：选择中文模式以优化GBK编码处理

## 🐛 故障排除

### 常见问题

1. **文件读取失败**
   - 尝试不同的语言选择
   - 检查文件编码格式
   - 使用自动检测模式

2. **字符显示异常**
   - 确认选择了正确的语言
   - 检查文件原始编码
   - 尝试UTF-8选项

3. **统计信息异常**
   - 确认文件格式正确
   - 检查数据完整性
   - 重新选择语言类型

## 🔮 未来扩展

- 支持更多语言类型
- 自动语言识别
- 批量文件处理
- 编码转换功能

---

**更新时间**: 2024年1月
**版本**: 1.0.0
**适用于**: QA Analysis System v2.0+ 